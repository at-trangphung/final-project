<% content_for :title, 'Search' %>
<% content_for :script, javascript_include_tag(:shop) %>

<% if @listProduct %>
<%# binding.pry %>
  <div class="w100 productFilter clearfix">
    <h2 class="pull-left"> Showing <strong><%= @listProduct.length %></strong> products </h2>

    <div class="pull-right ">
      <div class="change-order pull-right">
        <select class="form-control" name="orderby">
          <option selected="selected">Default sorting</option>
          <option value="popularity">Sort by popularity</option>
          <option value="rating">Sort by average rating</option>
          <option value="date">Sort by newness</option>
          <option value="price">Sort by price: low to high</option>
          <option value="price-desc">Sort by price: high to low</option>
        </select>
      </div>
      <div class="change-view pull-right"><a href="#" title="Grid" class="grid-view"> <i class="fa fa-th-large"></i> </a> <a href="#" title="List" class="list-view "><i class="fa fa-th-list"></i></a></div>
    </div>
  </div>

  <div class="row  categoryProduct xsResponse clearfix">
    <% @listProduct.each do |product| %>
      <div class="item col-sm-4 col-lg-4 col-md-4 col-xs-6" 
        style="height: 476px; display: flex;">
        <div class="product">
            <%= link_to product_path(id: product.id),
              method: :put, class: "add-fav tooltipHere ", style: "width: 50px;" do %>
              <i class="fas fa-heart">
                <span><%= product.view ? product.view : 0 %></span>
              </i>
            <% end %>

          <div class="image">
            <%= link_to product_path(product) do %>
              <%= cl_image_tag product.image_link, alt: 'img', height: "200px",
              width: "262px" %>
            <% end %>
            <div class="promotion"><span class="new-product"> NEW</span><%#= product.discount%></div>
          </div>
          <div class="description">
            <h4><%= product.name %></a></h4>
              <p><%= product.description%></p>
            <span class="size"><%= product.sizes.first.name %></span>
          </div>
          <div class="price">
            <span class="price"><%= product.product_options.first.price %>$</span>
          </div>
          <div class="action-control">
            <%= form_with scope: :cart, url: carts_path, local: true do |form| %>
              <%= form.hidden_field :size, value: product.sizes.pluck(:name).join %>
              <%= form.hidden_field :type, value: product.types.pluck(:name).join %>
              <%= form.hidden_field :product_id, value: product.id %>
              <%= form.hidden_field :quantity, value: 1 %>
              <%= form.submit 'Add to Cart', class: 'btn btn-primary' %>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
  
  <div class="row categoryFooter">
    <div class="col-lg-offset-4 col-lg-8 ">
      <%#= will_paginate(@productList, renderer: BootstrapPagination::Rails) %>
    </div>
  </div>
<% else %>
  <h2 class="pull-left"> Showing <strong>0 matching results</strong> </h2>
<% end %>
